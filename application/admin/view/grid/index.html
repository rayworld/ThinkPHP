{layout name='layout' /}
<!--CONTENT CONTAINER-->
<!--===================================================-->
<div id="content-container">
    
    <!--面包屑导航-->
    <!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->
    <div style="margin-top: 10px;">
        <ol class="breadcrumb">
            <li><a href="{:url('Admin/Index/index')}">首页</a></li>
            <li>权限控制</li>
            <li class="active">用户管理</li>
        </ol>
    </div>
    <!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->
    <!--End 面包屑导航-->
    
    <!--页面标题-->
    <!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->
    <div id="page-title">
        <h1 class="page-header text-overflow">用户列表</h1>
    </div>
    <!--~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~-->
    <!--End 页面标题-->

    <!-- Layui-->    
    <div class="col-sm-12">
        <table class="layui-hide" id="test"></table> 

        <script type="text/html" id="switchTpl">
        <!-- 这里的 checked 的状态只是演示 -->
        <input type="checkbox" name="sex" value="{{d.id}}" lay-skin="switch" lay-text="女|男" lay-filter="sexDemo" {{ d.sex == '女' ? 'checked' : '' }}>
        </script>

        <script>
            layui.use('table', function(){
            var table = layui.table;
            
            table.render({
                elem: '#test'
                ,url:'/v1/user/read'
                ,height: 'full-200'
                ,toolbar: 'default' //开启工具栏，此处显示默认图标，可以自定义模板，详见文档
                ,cellMinWidth: 80 //全局定义常规单元格的最小宽度，layui 2.2.1 新增
                ,page: true
                ,cols: [[
                {type:'checkbox'}
                ,{field:'id', width:80, title: 'ID', sort: true}
                ,{field:'username', width:80, title: '用户名'}
                ,{field:'sex', width:80, title: '性别', sort: true, templet: '#switchTpl', unresize: true}
                ,{field:'city', width:80, title: '城市'}
                ,{field:'sign', title: '签名', width: '30%', minWidth: 100} //minWidth：局部定义当前单元格的最小宽度，layui 2.2.1 新增
                ,{field:'experience', title: '积分', sort: true}
                ,{field:'score', title: '评分', sort: true}
                ,{field:'classify', title: '职业'}
                ,{field:'wealth', width:137, title: '财富', sort: true}
                ]]
                });

                
                                       
            //监听头工具栏事件
            table.on('toolbar(test)', function(obj){
                var checkStatus = table.checkStatus(obj.config.id)
                ,data = checkStatus.data; //获取选中的数据
                switch(obj.event){
                case 'add':
                    layer.msg('添加');
                break;
                case 'update':
                    if(data.length === 0){
                    layer.msg('请选择一行');
                    } else if(data.length > 1){
                    layer.msg('只能同时编辑一个');
                    } else {
                    layer.alert('编辑 [id]：'+ checkStatus.data[0].id);
                    }
                break;
                case 'delete':
                    if(data.length === 0){
                    layer.msg('请选择一行');
                    } else {
                    layer.msg('删除');
                    }
                break;
                };
                });
            });
        </script>
        <!-- End Layui-->
   </div>
 </div>
